<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>Network Diffusion | Zeyan LI&#39;s Homepage</title><meta name="keywords" content="Network Diffusion"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Network Diffusion[TOC]Invariant Network假设有N条时间序列，这N条时间序列之间的相关关系称为invariant link。这样的有invariant link的graph就称为invariant network。具体的做法是用ARX模型1。给定两个时间序列\(x(t), y(t)\)。若将\(x\)作为输入，那么记 \[ \phi(t)=[-y(t-1),.."><meta property="og:type" content="article"><meta property="og:title" content="Network Diffusion"><meta property="og:url" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/index.html"><meta property="og:site_name" content="Zeyan LI&#39;s Homepage"><meta property="og:description" content="Network Diffusion[TOC]Invariant Network假设有N条时间序列，这N条时间序列之间的相关关系称为invariant link。这样的有invariant link的graph就称为invariant network。具体的做法是用ARX模型1。给定两个时间序列\(x(t), y(t)\)。若将\(x\)作为输入，那么记 \[ \phi(t)=[-y(t-1),.."><meta property="og:locale" content="en"><meta property="og:image" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/image-20190625152129817.png"><meta property="og:image" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/image-20190625151638557.png"><meta property="og:image" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/image-20190625151846712.png"><meta property="og:image" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/image-20190625151900114.png"><meta property="og:image" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/image-20190625153725849.png"><meta property="og:updated_time" content="2020-03-27T09:10:54.076Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Network Diffusion"><meta name="twitter:description" content="Network Diffusion[TOC]Invariant Network假设有N条时间序列，这N条时间序列之间的相关关系称为invariant link。这样的有invariant link的graph就称为invariant network。具体的做法是用ARX模型1。给定两个时间序列\(x(t), y(t)\)。若将\(x\)作为输入，那么记 \[ \phi(t)=[-y(t-1),.."><meta name="twitter:image" content="https://blog.lizeyan.me/PaperNotes/network_diffusion/image-20190625152129817.png"><link rel="icon" href="/img/chitanta.png"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/open-sans/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.1.3/jquery.min.js"></script><script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-138651056-1","auto"),ga("send","pageview")</script></head></html><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/" id="logo"><span class="site-title">Zeyan LI&#39;s Homepage</span></a><nav id="main-nav"><a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a> <a class="main-nav-link" href="/categories">Categories</a> <a class="main-nav-link" href="/tags">Tags</a> <a class="main-nav-link" href="/">About</a></nav><nav id="sub-nav"><div class="profile" id="profile-nav"><a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/07d6dce3cbd35d7c566b5f53f05dba2d"> <i class="fa fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/">Home</a></td><td><a class="main-nav-link" href="/archives">Archives</a></td><td><a class="main-nav-link" href="/categories">Categories</a></td><td><a class="main-nav-link" href="/tags">Tags</a></td><td><a class="main-nav-link" href="/">About</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Search"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="inner profile-inner"><div class="base-info profile-block"><img id="avatar" src="https://www.gravatar.com/avatar/07d6dce3cbd35d7c566b5f53f05dba2d?s=128"><h2 id="name">Zeyan LI</h2><h3 id="title">Ph.D. student</h3><span id="location"><i class="fa fa-map-marker"></i>Beijing, China</span> <a id="follow" target="_blank" href="https://github.com/lizeyan/">FOLLOW</a></div><div class="article-info profile-block"><div class="article-info-block">38 <span>posts</span></div><div class="article-info-block">3 <span>tags</span></div></div><div class="profile-block social-links"><table><tr><td><a href="https://github.com/lizeyan/" target="_blank" title="github" class="tooltip"><i class="fa fa-github"></i></a></td></tr></table></div></div></aside><aside id="sidebar"><div class="widget-wrap" id="categories"><h3 class="widget-title"><span>categories</span> &nbsp; <a id="allExpand" href="#"><i class="fa fa-angle-double-down fa-2x"></i></a></h3><ul class="unstyled" id="tree"><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Algorithm</a><ul class="unstyled" id="tree"><li class="file"><a href="/Algorithm/PC_algorithm/">PC Algorithm</a></li><li class="file"><a href="/Algorithm/association_rule_mining/">Association Rule Mining</a></li><li class="file"><a href="/Algorithm/locality_sensitive_hash/">Locality Sensitive Hashing</a></li><li class="file"><a href="/Algorithm/pagerank/">Page Rank</a></li><li class="file"><a href="/Algorithm/sequential_pattern_mining/">Sequential Pattern Mining</a></li><li class="file"><a href="/Algorithm/tsne/">t-SNE</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Conference</a><ul class="unstyled" id="tree"><li class="file"><a href="/Conference/ISSRE/"></a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; DeepLearningBook</a><ul class="unstyled" id="tree"><li class="file"><a href="/DeepLearningBook/optimization/">Optimization</a></li><li class="file"><a href="/DeepLearningBook/regularization/">Regularization</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Dreaming Dogs</a><ul class="unstyled" id="tree"><li class="file"><a href="/Dreaming Dogs/What is Dreaming Dogs/">Dreaming Dogs</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Latex</a><ul class="unstyled" id="tree"><li class="file"><a href="/Latex/cjk/">cjk</a></li><li class="file"><a href="/Latex/latex_snippets/">LaTex Snippets</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Linux</a><ul class="unstyled" id="tree"><li class="file"><a href="/Linux/bash_redirect_output/">Bash Redirect Output</a></li><li class="file"><a href="/Linux/ubuntu_1804_install_notes/">Ubuntu 18.04 install notes</a></li></ul></li><li class="directory open"><a href="#" data-role="directory"><i class="fa fa-folder-open"></i> &nbsp; PaperNotes</a><ul class="unstyled" id="tree"><li class="file"><a href="/PaperNotes/gan/">GAN</a></li><li class="file"><a href="/PaperNotes/gan_anomaly_detection/">GAN Anomaly Detection</a></li><li class="file active"><a href="/PaperNotes/network_diffusion/">Network Diffusion</a></li><li class="file"><a href="/PaperNotes/train_gan/">Train GAN</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Proxmox Virtual Environment</a><ul class="unstyled" id="tree"><li class="file"><a href="/Proxmox Virtual Environment/unable_to_access_host/">Unable to Access Host via PVE API</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Python</a><ul class="unstyled" id="tree"><li class="file"><a href="/Python/Einstein-Summation-Convention/">Einstein Summation Convention</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; StatisticalMachineLearning</a><ul class="unstyled" id="tree"><li class="file"><a href="/StatisticalMachineLearning/boost/">boost</a></li><li class="file"><a href="/StatisticalMachineLearning/clustering/">Clustering</a></li><li class="file"><a href="/StatisticalMachineLearning/dimension_reduction/">Dimension Reduction</a></li><li class="file"><a href="/StatisticalMachineLearning/kernel_density_estimation/">Kernel Density Estimation</a></li><li class="file"><a href="/StatisticalMachineLearning/nb_and_lr/">NB and LR</a></li><li class="file"><a href="/StatisticalMachineLearning/reinforcement_learning/">Reinforcement Learning</a></li><li class="file"><a href="/StatisticalMachineLearning/svm/">SVM</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; Statistics</a><ul class="unstyled" id="tree"><li class="file"><a href="/Statistics/test/">Statistical Test</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; configuration</a><ul class="unstyled" id="tree"><li class="file"><a href="/configuration/hexo_config/">Hexo Config</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; macOS</a><ul class="unstyled" id="tree"><li class="file"><a href="/macOS/install_homebrew/">Install Homebrew</a></li><li class="file"><a href="/macOS/install_supervisor/">Install supervisor via brew</a></li><li class="file"><a href="/macOS/macos_unable_to_fork_issue/">macOS Catalina unable to fork issue</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; nginx</a><ul class="unstyled" id="tree"><li class="file"><a href="/nginx/log_format/">log format of nginx</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; pypy</a><ul class="unstyled" id="tree"><li class="file"><a href="/pypy/install_pypy/">install PyPy</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; seafile</a><ul class="unstyled" id="tree"><li class="file"><a href="/seafile/client_conflicts/">Fix 'there is a conflict with an existing library'</a></li></ul></li><li class="directory"><a href="#" data-role="directory"><i class="fa fa-folder"></i> &nbsp; 日本語</a><ul class="unstyled" id="tree"><li class="file"><a href="/日本語/キセキ/">キセキ</a></li><li class="file"><a href="/日本語/本文/">本文</a></li><li class="file"><a href="/日本語/用言/">用言</a></li></ul></li></ul></div><script>$(document).ready(function(){var r="fa-folder-open",i="fa-folder",l="fa-angle-double-down",d="fa-angle-double-up";$(document).on("click",'#categories a[data-role="directory"]',function(a){a.preventDefault();var e=$(this).children(".fa"),s=e.hasClass(r),l=$(this).siblings("ul");e.removeClass(r).removeClass(i),s?(void 0!==l&&l.slideUp({duration:100}),e.addClass(i)):(void 0!==l&&l.slideDown({duration:100}),e.addClass(r))}),$('#categories a[data-role="directory"]').bind("contextmenu",function(a){a.preventDefault();var e=$(this).children(".fa"),s=e.hasClass(r),l=$(this).siblings("ul"),d=$.merge(l.find("li ul"),l),o=$.merge(l.find(".fa"),e);o.removeClass(r).removeClass(i),s?(d.slideUp({duration:100}),o.addClass(i)):(d.slideDown({duration:100}),o.addClass(r))}),$(document).on("click","#allExpand",function(a){a.preventDefault();var e=$(this).children(".fa"),s=e.hasClass(l);e.removeClass(l).removeClass(d),s?($("#sidebar .fa.fa-folder").removeClass("fa-folder").addClass("fa-folder-open"),$("#categories li ul").slideDown({duration:100}),e.addClass(d)):($("#sidebar .fa.fa-folder-open").removeClass("fa-folder-open").addClass("fa-folder"),$("#categories li ul").slideUp({duration:100}),e.addClass(l))})})</script><div id="toTop" class="fa fa-angle-up"></div></aside><section id="main"><article id="post-PaperNotes/network_diffusion" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><div class="article-meta"><div class="article-category"><i class="fa fa-folder"></i> <a class="article-category-link" href="/categories/PaperNotes/">PaperNotes</a></div><div class="article-date"><i class="fa fa-calendar"></i> <a href="/PaperNotes/network_diffusion/"><time datetime="2020-03-27T09:10:54.076Z" itemprop="datePublished">2020-03-27</time></a></div><div class="article-meta-button"><a href="https://github.com/lizeyan/blog/raw/master/source/_posts/PaperNotes/network_diffusion.md">Source</a></div><div class="article-meta-button"><a href="https://github.com/lizeyan/blog/edit/master/source/_posts/PaperNotes/network_diffusion.md">Edit</a></div><div class="article-meta-button"><a href="https://github.com/lizeyan/blog/commits/master/source/_posts/PaperNotes/network_diffusion.md">History</a></div></div><h1 class="article-title" itemprop="name">Network Diffusion</h1></header><div class="article-entry" itemprop="articleBody"><h1 id="network-diffusion">Network Diffusion</h1><p>[TOC]</p><h2 id="invariant-network">Invariant Network</h2><p>假设有N条时间序列，这N条时间序列之间的相关关系称为invariant link。这样的有invariant link的graph就称为invariant network。</p><p>具体的做法是用ARX模型<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>。给定两个时间序列<span class="math inline">\(x(t), y(t)\)</span>。若将<span class="math inline">\(x\)</span>作为输入，那么记 <span class="math display">\[ \phi(t)=[-y(t-1),...,-y(t-n),x(t-k),...,x(t-k-m)]^\top\\ \theta = [a_1,...,a_n,b_0,...,b_m]^\top \]</span> 模型定义为<span class="math inline">\(\hat{y}(t)=\phi(t)^\top\theta\)</span>。</p><p>通过最小化MSE得，<span class="math inline">\(\theta\)</span>的解为 <span class="math display">\[ \hat{\theta}_N=[\sum_{t=1}^{N}\phi(t)\phi(t)^\top]^{-1}\sum_{t=1}^{N}\phi(t)y(t) \]</span> 定义fitness score为 <span class="math display">\[ F(\theta)=1 - \sqrt{\frac{\sum_{t=1}^{N}|y(t)-\hat{y}(t)|^2}{\sum_{t=1}^{N}|y(t)-\bar{y}|^2}} \]</span> 如果<span class="math inline">\(F(\theta)\)</span>超过一个给定的阈值，那么就认为两个模型之间有相关关系。</p><p>但是给定一组<span class="math inline">\(x, y\)</span>，我们无法事先确定哪个是输入哪个是输出。<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>中的方法是选择<span class="math inline">\(F(\theta)\)</span>较高的那一个，但是同时要求两个模型的fitness score都比较高。</p><h2 id="broken-links">Broken Links</h2><p>当系统发生异常时，组件之间的invariant link常常会发生变化。消失的invariant link就被称为broken link。</p><p>通过检测哪些组件导致了broken link可以引导运维人员找到故障的根因。</p><figure><img src="/PaperNotes/network_diffusion/image-20190625152129817.png" alt="image-20190625152129817"><figcaption>image-20190625152129817</figcaption></figure><h2 id="mrf-model">MRF Model</h2><h3 id="algorithm">Algorithm</h3><p>MRF（Markov random field）模型可以用来建模invariant network和borken network<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>。</p><p>MRF包含若干个变量，每个变量有隐状态和显状态，隐状态之间有互相的连接。</p><p>每个包含至少一条broken link的节点是MRF中的一个变量，broken link是变量之间的连接。其observed state是我们对每个节点的根因程度的直接观察。具体的定义可以为 <span class="math display">\[ RB_{v_i}=\frac{number\&gt;of\&gt;borken\&gt;links\&gt;of\&gt;v_i}{number\&gt;of\&gt;all\&gt;links\&gt;of\&gt;v_i}\\ RUB_{v_i}=1-\frac{number\&gt;of\&gt;broken\&gt;links\&gt;related\&gt;to\&gt;BINN}{number\&gt;of\&gt;all\&gt;links\&gt;related\&gt;to\&gt;BINN} \]</span> BINN指的是节点的通过broken link连接起来的邻居</p><p>RB被用来作为隐状态的初始值，RUB作为显状态<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>。</p><p>node compatibility function定义为 <span class="math display">\[ \Phi(\lambda, \omega)=\begin{cases}\omega &amp; \lambda=abnormal\\1-\omega &amp; \lambda =normal\end{cases} \]</span> 每个节点是根因的belief，<span class="math inline">\(b(\lambda)\)</span>为： <span class="math display">\[ b_i(\lambda)=k\Phi(\lambda, \omega_i)\prod_{j\in N(i)}m_{ji}(\lambda) \]</span> <span class="math inline">\(m_{ji}(\lambda)\)</span>表示邻居<span class="math inline">\(j\)</span>认为<span class="math inline">\(i\)</span>处于状态<span class="math inline">\(\lambda\)</span>的belief <span class="math display">\[ m_{ij}(\lambda)=\sum_{\lambda&#39;}\Phi(\lambda,\omega_i)\Psi(\lambda,\lambda&#39;)\prod_{n\in N(i)/j}m_{ni}(\lambda&#39;) \]</span> 其中<span class="math inline">\(\Psi(\lambda,\lambda&#39;)\)</span>表示edge compatibility function。</p><table><thead><tr class="header"><th></th><th>normal</th><th>abnormal</th></tr></thead><tbody><tr class="odd"><td>normal</td><td><span class="math inline">\(\epsilon_0\)</span> (很小)</td><td><span class="math inline">\(1-\epsilon_0\)</span></td></tr><tr class="even"><td>abnormal</td><td><span class="math inline">\(\epsilon\)</span> （小于0.5）</td><td><span class="math inline">\(1-\epsilon\)</span></td></tr></tbody></table><p>这样的message passing的方法被称为loopy BP<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>。</p><h3 id="evaluation">Evaluation</h3><p>~<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>中只把MRF model和直接用RB给节点排序的方法进行了对比。评价指标是top-k precision，top-k recall，和nDCG。</p><ul><li>Top-k precision and recall. k一般选择ground truth set大小的两倍 [^dcg]。</li><li>nDCG （cumulated gain vector with discount, [^dcg]）：表征top-p的排序结果。p一半比ground truth set略小。 <span class="math display">\[ nDCG=\frac{DCG}{IDDCG} \]</span> <span class="math display">\[ DCG_p=\sum_{i=1}^{p}\frac{2^{rel_i-1}}{\log_2{1+i}} \]</span> ​ <span class="math inline">\(rel_i\)</span>是第i名在ground truth中的名次。IDCG是ground truth的DCG</li></ul><p>但是从结果看来，LBP比直接用RB并不好太多。Benchmark是人工生成的。</p><figure><img src="/PaperNotes/network_diffusion/image-20190625151638557.png" alt="image-20190625151638557"><figcaption>image-20190625151638557</figcaption></figure><figure><img src="/PaperNotes/network_diffusion/image-20190625151846712.png" alt="image-20190625151846712"><figcaption>image-20190625151846712</figcaption></figure><figure><img src="/PaperNotes/network_diffusion/image-20190625151900114.png" alt="image-20190625151900114"><figcaption>image-20190625151900114</figcaption></figure><h2 id="label-propagation-and-network-diffusionkdd2016">Label Propagation and Network Diffusion<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></h2><h3 id="algorithm-1">Algorithm</h3><p><span class="math inline">\(\mathbf{A}_{n\times n}\)</span>, <span class="math inline">\(\mathbf{P}_{n\times n}\)</span>是原本的IN和broken IN的邻接矩阵。<span class="math inline">\(\mathbf{A}\)</span>的元素表示两个节点之间的相关性，比如fitness score。<span class="math inline">\(\mathbf{P}\)</span>的元素表示两个节点之间的不相关性，比如residual。</p><p>故障传播模型指的是，给定每个节点是否（根因）异常的<span class="math inline">\(\mathbf{e}\)</span>，计算在IN上故障传播后每个节点的故障程度<span class="math inline">\(\mathbf{r}\)</span>。</p><p>基本的假设是，故障沿着相关传播，<span class="math inline">\(\mathbf{A}_{ij}\)</span>越大（根据度normalized之后），那么关联的两个节点之间的<span class="math inline">\(\mathbf{r}_i, \mathbf{r}_j\)</span>就应该越接近。即<span class="math inline">\(\mathbf{r}\)</span>在IN上是平滑的。</p><p>另一个假设是<span class="math inline">\(\mathbf{e}\)</span>和<span class="math inline">\(\mathbf{r}\)</span>之间要尽量接近。 <span class="math display">\[ \min_{\mathbf{r}\ge 0}c\mathbf{r}^\top(\mathbf{1}-\tilde{\mathbf{A}})\mathbf{r}+(1-c)||\mathbf{r}-\mathbf{e}||_2^2 \]</span></p><p>Network diffusion指的是衡量根因重构出来的broken IN和真实的broken IN的差别。 <span class="math display">\[ \min_{\mathbf{e}\in \{0, 1\}^N}\&gt;\lambda||(\mathbf{r}\mathbf{r}^\top)\odot\mathbf{M}-\tilde{\mathbf{P}}||_2^2 + c\mathbf{r}^\top(\mathbf{1}-\tilde{\mathbf{A}})\mathbf{r}+(1-c)||\mathbf{r}-\mathbf{e}||_2^2 \]</span> 松弛形式 <span class="math display">\[ \min_{\mathbf{e}\ge0}\&gt;\lambda||(\mathbf{r}\mathbf{r}^\top)\odot\mathbf{M}-\tilde{\mathbf{P}}||_2^2 + c\mathbf{r}^\top(\mathbf{1}-\tilde{\mathbf{A}})\mathbf{r}+(1-c)||\mathbf{r}-\mathbf{e}||_2^2 + \tau||\mathbf{e}||_1 \]</span> 上述优化问题的迭代解法参考了<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p><figure><img src="/PaperNotes/network_diffusion/image-20190625153725849.png" alt="image-20190625153725849"><figcaption>image-20190625153725849</figcaption></figure><h3 id="evaluation-1">Evaluation</h3><p>同样是在人工随机生成的500条time series上进行的实验。评价指标仍然是top-k precision，top-k recall和nDCG。</p><p>除此之外还随机注入了broken link作为噪声，检验robustness。实验表明噪声比例多至0.5时性能才会有明显下降。</p><h2 id="multiple-root-cause">Multiple Root Cause</h2><p>考虑到invariant network中会有不同的cluster，故障是在cluster内传播的。同时系统中可能有多个cluster同时发生了故障。因此<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>提出了基于聚类的故障定位方法CRD。</p><h3 id="algorithm-2">Algorithm</h3><p>定义矩阵 <span class="math inline">\(\mathbf{U}_{n\times k}\)</span>为cluster membership矩阵，<span class="math inline">\(\mathbf{U}_{xi}=p(i|x)， \mathbf{U}\mathbf{1}_{k}=\mathbf{1}_n\)</span>。</p><p>首先要使用正常的IN进行聚类。</p><p>通过doubly schchastic matrix decomposition方法计算<span class="math inline">\(\mathbf{U}\)</span>。</p><p>首先计算重构的邻接矩阵<span class="math inline">\(\hat{A}\)</span>。<span class="math inline">\(\hat{A}_{xy}=\sum_{i=1}^{k}\frac{\mathbf{U_{xi}\mathbf{U}_{yi}}}{\sum_{z=1}^n\mathbf{U}_{zi}}\)</span></p><p>然后优化<span class="math inline">\(A\)</span>和<span class="math inline">\(\hat{A}\)</span>的KL散度 <span class="math inline">\(D_{KL}[A||\hat{A}]\)</span></p><p>通过给<span class="math inline">\(\mathbf{U}\)</span>指定Dirichlet先验，使得可以得到尽量稀疏的<span class="math inline">\(\mathbf{U}\)</span>。</p><p>然后需要使用broken IN进行聚类。Intuition是如果两个节点在同一个发生故障的cluster中，那么他们之间更可能出现broken link。</p><p>定义参数<span class="math inline">\(s_i\)</span>表示一个cluster的异常程度。 <span class="math display">\[ \mathbf{P}_{xy}\sim Bernoulli(\sum_{i=1}^{k}\mathbf{U}_{xi}\mathbf{U}_{yi}s_i) \]</span> 然后通过MLE学习<span class="math inline">\(\mathbf{U}\)</span>和<span class="math inline">\(\mathbf{s}\)</span>。</p><p>以上的两个聚类方法通过联合优化的方法可以一起进行。</p><p>定义<span class="math inline">\(E_{xi}=1\)</span>表示节点<span class="math inline">\(x\)</span>是cluster <span class="math inline">\(i\)</span>的根因。仿照<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>的推导，可以得到 <span class="math display">\[ \min_{\mathbf{E}\ge0}\&gt;||(\mathbf{H}(\mathbf{U}\odot\mathbf{E})(\mathbf{U}\odot\mathbf{E})^\top\mathbf{H})\odot M - \tilde{\mathbf{P}}||_2^2 + \tau||\mathbf{E}||_1 \]</span> 其中<span class="math inline">\(\mathbf{H}=(1-c)(\mathbf{I}-c\tilde{\mathbf{A}})^{-1}\)</span></p><p>最后的rank score是<span class="math inline">\(f_x=\sum_{i=1}^{k}\mathbf{U}_{xi}\odot\mathbf{E}_{xi} \cdot s_i\)</span></p><h3 id="evaluation-2">Evaluation</h3><p>数据集是BIS。<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>中也用了这个数据集进行定性的评测，但是没有找到公开的下载地址。</p><section class="footnotes" role="doc-endnotes"><hr><ol><li id="fn1" role="doc-endnote"><p>Guofei Jiang, Haifeng Chen, K. Yoshihira. Efficient and Scalable Algorithms for Inferring Likely Invariants in Distributed Systems<a href="#fnref1" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn2" role="doc-endnote"><p>Guofei Jiang, Haifeng Chen, K. Yoshihira. Efficient and Scalable Algorithms for Inferring Likely Invariants in Distributed Systems<a href="#fnref2" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn3" role="doc-endnote"><p>Changxia Tao, Yang Ge, Qinbao Song, Yuan Ge, Olufemi A. Omitaomu. Metric Ranking of Invariant Networks with Belief Propagation.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn4" role="doc-endnote"><p>Changxia Tao, Yang Ge, Qinbao Song, Yuan Ge, Olufemi A. Omitaomu. Metric Ranking of Invariant Networks with Belief Propagation.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn5" role="doc-endnote"><p>Changxia Tao, Yang Ge, Qinbao Song, Yuan Ge, Olufemi A. Omitaomu. Metric Ranking of Invariant Networks with Belief Propagation.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn6" role="doc-endnote"><p>Changxia Tao, Yang Ge, Qinbao Song, Yuan Ge, Olufemi A. Omitaomu. Metric Ranking of Invariant Networks with Belief Propagation.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn7" role="doc-endnote"><p>Wei Cheng, Kai Zhang, Haifeng Chen, Guofei Jiang, Zhengzhang Chen, Wei Wang. Ranking Causal Anomalies via Temporal and Dynamical Analysis on Vanishing Correlations<a href="#fnref7" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn8" role="doc-endnote"><p>Chris Ding , Tao Li , Wei Peng , Haesun Park, Orthogonal nonnegative matrix t-factorizations for clustering, Proceedings of the 12th ACM SIGKDD international conference on Knowledge discovery and data mining, August 20-23, 2006, Philadelphia, PA, USA<a href="#fnref8" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn9" role="doc-endnote"><p>Ranking Causal Anomalies by Modeling Local Propagations on Networked Systems, ICDM 2017<a href="#fnref9" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn10" role="doc-endnote"><p>Wei Cheng, Kai Zhang, Haifeng Chen, Guofei Jiang, Zhengzhang Chen, Wei Wang. Ranking Causal Anomalies via Temporal and Dynamical Analysis on Vanishing Correlations<a href="#fnref10" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn11" role="doc-endnote"><p>Changxia Tao, Yang Ge, Qinbao Song, Yuan Ge, Olufemi A. Omitaomu. Metric Ranking of Invariant Networks with Belief Propagation.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩</a></p></li><li id="fn12" role="doc-endnote"><p>Wei Cheng, Kai Zhang, Haifeng Chen, Guofei Jiang, Zhengzhang Chen, Wei Wang. Ranking Causal Anomalies via Temporal and Dynamical Analysis on Vanishing Correlations<a href="#fnref12" class="footnote-back" role="doc-backlink">↩</a></p></li></ol></section></div><footer class="article-footer"></footer></div></article><nav id="article-nav"><a href="/PaperNotes/gan_anomaly_detection/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">GAN Anomaly Detection</div></a><a href="/PaperNotes/train_gan/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">Train GAN</div></a></nav><script type="text/javascript">!function(){var e=window.location.href,r=document.referrer;if(!/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(e)){var o="//api.share.baidu.com/s.gif";r?(o+="?r="+encodeURIComponent(document.referrer),e&&(o+="&l="+e)):e&&(o+="?l="+e),(new Image).src=o}}(window)</script></section></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">Zeyan LI &copy; 2020 <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png"></a><br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a></div></div></footer><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });</script><script async src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/main.js"></script></div></body>